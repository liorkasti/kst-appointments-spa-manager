{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMutation } from 'react-query';\nimport { axiosInstance } from '../../../axiosInstance';\nimport { useCustomToast } from '../../app/hooks/useCustomToast';\nimport { useUser } from '../../user/hooks/useUser';\n\n// for when we need functions for useMutation\nasync function setAppointmentUser(appointment, userId) {\n  if (!userId) return;\n  const patchOp = appointment.userId ? 'replace' : 'add';\n  const patchData = [{\n    op: patchOp,\n    path: '/userId',\n    value: userId\n  }];\n  await axiosInstance.patch(`/appointment/${appointment.id}`, {\n    data: patchData\n  });\n}\n\n// TODO: update type for React Query mutate function\n\nexport function useReserveAppointment() {\n  _s();\n  const {\n    user\n  } = useUser();\n  const toast = useCustomToast();\n  const {\n    mutate\n  } = useMutation(appointment => setAppointmentUser(appointment, user === null || user === void 0 ? void 0 : user.id));\n  return mutate;\n}\n_s(useReserveAppointment, \"E5biGK6hKVeRXoP/BI43Cb6s1PM=\", false, function () {\n  return [useUser, useCustomToast, useMutation];\n});","map":{"version":3,"names":["useMutation","axiosInstance","useCustomToast","useUser","setAppointmentUser","appointment","userId","patchOp","patchData","op","path","value","patch","id","data","useReserveAppointment","_s","user","toast","mutate"],"sources":["/Users/liorkastenbaum/Repos/kst-appointments-manager-app/client/src/components/appointments/hooks/useReserveAppointment.ts"],"sourcesContent":["import { useMutation } from 'react-query';\n\nimport { Appointment } from '../../../../../shared/types';\nimport { axiosInstance } from '../../../axiosInstance';\nimport { queryKeys } from '../../../react-query/constants';\nimport { useCustomToast } from '../../app/hooks/useCustomToast';\nimport { useUser } from '../../user/hooks/useUser';\n\n// for when we need functions for useMutation\nasync function setAppointmentUser(\n  appointment: Appointment,\n  userId: number | undefined,\n): Promise<void> {\n  if (!userId) return;\n  const patchOp = appointment.userId ? 'replace' : 'add';\n  const patchData = [{ op: patchOp, path: '/userId', value: userId }];\n  await axiosInstance.patch(`/appointment/${appointment.id}`, {\n    data: patchData,\n  });\n}\n\n// TODO: update type for React Query mutate function\ntype AppointmentMutationFunction = (appointment: Appointment) => void;\n\nexport function useReserveAppointment(): AppointmentMutationFunction {\n  const { user } = useUser();\n  const toast = useCustomToast();\n\n  const { mutate } = useMutation((appointment) =>\n    setAppointmentUser(appointment, user?.id),\n  );\n  return mutate;\n}\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,aAAa;AAGzC,SAASC,aAAa,QAAQ,wBAAwB;AAEtD,SAASC,cAAc,QAAQ,gCAAgC;AAC/D,SAASC,OAAO,QAAQ,0BAA0B;;AAElD;AACA,eAAeC,kBAAkBA,CAC/BC,WAAwB,EACxBC,MAA0B,EACX;EACf,IAAI,CAACA,MAAM,EAAE;EACb,MAAMC,OAAO,GAAGF,WAAW,CAACC,MAAM,GAAG,SAAS,GAAG,KAAK;EACtD,MAAME,SAAS,GAAG,CAAC;IAAEC,EAAE,EAAEF,OAAO;IAAEG,IAAI,EAAE,SAAS;IAAEC,KAAK,EAAEL;EAAO,CAAC,CAAC;EACnE,MAAML,aAAa,CAACW,KAAK,CAAE,gBAAeP,WAAW,CAACQ,EAAG,EAAC,EAAE;IAC1DC,IAAI,EAAEN;EACR,CAAC,CAAC;AACJ;;AAEA;;AAGA,OAAO,SAASO,qBAAqBA,CAAA,EAAgC;EAAAC,EAAA;EACnE,MAAM;IAAEC;EAAK,CAAC,GAAGd,OAAO,CAAC,CAAC;EAC1B,MAAMe,KAAK,GAAGhB,cAAc,CAAC,CAAC;EAE9B,MAAM;IAAEiB;EAAO,CAAC,GAAGnB,WAAW,CAAEK,WAAW,IACzCD,kBAAkB,CAACC,WAAW,EAAEY,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEJ,EAAE,CAC1C,CAAC;EACD,OAAOM,MAAM;AACf;AAACH,EAAA,CAReD,qBAAqB;EAAA,QAClBZ,OAAO,EACVD,cAAc,EAETF,WAAW;AAAA"},"metadata":{},"sourceType":"module"}